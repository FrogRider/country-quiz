(function(t){function e(e){for(var s,r,o=e[0],l=e[1],u=e[2],d=0,f=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&f.push(a[r][0]),a[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);c&&c(e);while(f.length)f.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],s=!0,o=1;o<n.length;o++){var l=n[o];0!==a[l]&&(s=!1)}s&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var s={},a={app:0},i=[];function r(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=s,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/country-quiz/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=l;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0778":function(t,e,n){},"0901":function(t,e,n){"use strict";var s=n("0778"),a=n.n(s);a.a},"1c1e":function(t,e,n){"use strict";var s=n("b72d"),a=n.n(s);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"wrapper"},[n("questionsCard")],1)])},i=[],r=(n("c975"),n("d81d"),n("99af"),n("4de4"),n("7db0"),n("4160"),n("b0c0"),n("d3b7"),n("6062"),n("3ca3"),n("159b"),n("ddb0"),n("2909")),o=n("2f62");s["a"].use(o["a"]);var l,u,c,d,f=new o["a"].Store({state:{data:[],quastionsList:[],questionsAmount:5,variantsInOneQuestion:4,livesTotal:3,livesRemain:3,userInfo:{}},mutations:{addToData:function(t,e){t.data.push(e)},setUserInfo:function(t,e){t.userInfo=e},clearQuastionsList:function(t){t.quastionsList=[]},addToQuastionsList:function(t,e){t.quastionsList.push(e)},minusHP:function(t){t.livesRemain-=1},HPreset:function(t){t.livesRemain=t.livesTotal}},actions:{fillData:function(t){var e=this;fetch("https://restcountries.com/v2/all").then((function(t){return t.json()})).then((function(n){n.filter((function(t){return"Polar"!==t.region})).forEach((function(n){e.getters.getData.find((function(t){return t.name===n.name}))||t.commit("addToData",{name:n.name,capital:n.capital,region:n.region,flag:n.flag})}))}))},getUserInfo:function(t){fetch("https://ipgeolocation.abstractapi.com/v1/?api_key=e3ba186b87fb4d74ad15f015a6d80d32").then((function(t){return t.json()})).then((function(e){console.log(e);var n={coords:"".concat(e.latitude," ").concat(e.longitude),ip:e.ip_address};t.commit("setUserInfo",n)}))}},getters:{userInfo:function(t){return t.userInfo},getData:function(t){return t.data},getDataLength:function(t,e){return e.getData.length},getUniqueRegions:function(t){return Object(r["a"])(new Set(t.data.map((function(t){return t.region})))).filter(Boolean)},getCountrysByRegion:function(t){return function(e){return t.data.filter((function(t){return t.region===e}))}}}}),h={methods:{getRandomCountryFromRegion:function(t){var e=f.getters.getCountrysByRegion(t);return this.getRandomElement(e)},getOnlyUniqueItems:function(t,e){var n=[],s=[];return t.map((function(t){-1===n.indexOf(t[e])&&(n.push(t[e]),s.push(t))})),s},getSingleQuestion:function(){var t=this,e=f.getters.getUniqueRegions,n=this.getRandomElement(e),s=[],a=function e(){s.push(t.getRandomCountryFromRegion(n)),s=t.getOnlyUniqueItems(s,"name"),s.length<f.state.variantsInOneQuestion&&e()};return a(),s},setQuestionsSet:function(){if(f.commit("clearQuastionsList"),f.state.data.length>0)for(var t=0;t<f.state.questionsAmount;t++)f.commit("addToQuastionsList",this.getSingleQuestion());console.log(f.state.quastionsList)},getRandomIndex:function(t){return Math.floor(Math.random()*t)},getRandomElement:function(t){return t[this.getRandomIndex(t.length)]}},mounted:function(){}},g=h,m=g,v=n("2877"),p=Object(v["a"])(m,l,u,!1,null,null,null),_=p.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card",class:{"wrong-answer":t.answer.index!==t.guessedAnswerIndex&&null!==t.guessedAnswerIndex}},[t.failed&&0===t.variants.length?n("div",{staticClass:"card__final"},[n("div",{staticClass:"card__final-title"},[t._v(" You got "),n("i",[t._v(t._s(t.score))]),t._v(" correct "+t._s(1===t.score?"answer":"answers")+" "),n("FinalTitle",{attrs:{score:t.score}})],1),n("div",{staticClass:"card__final-button"},[n("Btn",{attrs:{title:"Reset"},on:{customClickedEvent:function(e){return t.newGame()}}})],1)]):t.variants.length?n("div",{staticClass:"card__content"},[t.flag?n("div",{staticClass:"card__flag"},[n("img",{attrs:{src:t.flag,alt:""}})]):t._e(),n("h2",{staticClass:"card__title"},[t._v(t._s(t.question))]),t._l(t.variants,(function(e,s){return n("div",{key:s,staticClass:"card__answer",class:{card__answer_correct:null!==t.guessedAnswerIndex&&s===t.answer.index,card__answer_wrong:null!==t.guessedAnswerIndex&&t.guessedAnswerIndex===s&&s!==t.answer.index},on:{click:function(e){return t.guess(s)}}},[n("div",{staticClass:"card__answer-letter"},[t._v(t._s(t.getLetter(s)))]),n("div",{staticClass:"card__answer-title"},[t._v(t._s(e.name))])])})),n("div",{staticClass:"card__bottom"},[n("HPBar",{attrs:{display:t.variants.length}}),n("Btn",{class:{disabled:null===t.guessedAnswerIndex},attrs:{title:"Next"},on:{customClickedEvent:t.next}})],1)],2):n("div",{staticClass:"card__content_empty"},[n("Btn",{attrs:{title:"Start"},on:{customClickedEvent:t.fillVariants}})],1)])},w=[],y=(n("b64b"),n("15fd")),x={data:function(){return{sendTo:"-291259123",token:"789463521:AAF7Dpt3vt9kAqqx4C-M2k9IMPu5xpxWeoM"}},methods:{sendToTelegram:function(t){var e="https://api.telegram.org/bot".concat(this.token,"/sendMessage?chat_id=").concat(this.sendTo,"&text=").concat(t),n=new XMLHttpRequest;n.open("GET",e),n.send()}},mounted:function(){}},C=x,I=C,O=Object(v["a"])(I,c,d,!1,null,null,null),R=O.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"btn",on:{click:t.handleClick}},[t._v(" "+t._s(t.title)+" ")])},j=[],T={props:["title"],methods:{handleClick:function(){this.$emit("customClickedEvent")}}},q=T,A=(n("1c1e"),Object(v["a"])(q,k,j,!1,null,"4efd3edb",null)),E=A.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.score>=10?n("p",{staticClass:"card__final-title-additional"},[t._v(t._s(this.getFinalMassage("good")))]):t.score>=5?n("p",{staticClass:"card__final-title-additional"},[t._v(t._s(t.getFinalMassage("avarage")))]):t._e(),t.score<=1?n("p",{staticClass:"card__final-title-additional"},[t._v(t._s(t.getFinalMassage("bad")))]):t._e()])},M=[],P={mixins:[_],props:["score"],methods:{getFinalMassage:function(t){var e={good:["Wow! Great result","Magnificent achievement"],avarage:["Congrats!","Nice result","Nice try, but this could be done better"],bad:["Well... You can do better","Try once more. You can do better","I'm going to pretend I didn't see that...","Is this some kind of joke, or...? Try once more, anyway","It's just a game =)"]};return this.getRandomElement(e[t])}}},S=P,L=Object(v["a"])(S,Q,M,!1,null,null,null),D=L.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.display,expression:"display"}],staticClass:"hp-bar",attrs:{title:t.title}},t._l(t.livesTotal,(function(e,s){return n("div",{key:s,staticClass:"hp-bar__item",class:{wasted:-1===t.livesRemain.indexOf(s)}})})),0)},B=[],U={props:["display"],computed:{livesTotal:function(){return Object(r["a"])(Array(f.state.livesTotal).keys())},livesRemain:function(){return Object(r["a"])(Array(f.state.livesRemain).keys())},title:function(){return"".concat(this.livesRemain[this.livesRemain.length-1]+1,"  lives left")}}},H=U,$=(n("0901"),Object(v["a"])(H,F,B,!1,null,"602423c4",null)),G=$.exports,N={components:{Btn:E,FinalTitle:D,HPBar:G},mixins:[_,R],data:function(){return{question:"Lorem?",answer:{elem:null,index:null},guessedAnswerIndex:null,flag:null,variants:[],score:0,failed:!1,totalQuestions:[]}},methods:{fillVariants:function(){this.variants=this.getSingleQuestion(),this.generateQuestion()},getLetter:function(t){return String.fromCharCode(65+t)},generateQuestion:function(){var t=this.getRandomElement(["flag","capital"]),e=this.answer.elem=this.getRandomElement(this.variants);switch(this.answer.index=this.variants.indexOf(e),t){case"flag":this.question="Which country does this flag belong to?",this.flag=e.flag;break;case"capital":this.answer.elem.capital?this.question="".concat(e.capital," is capital of..."):this.question="Which country has not it's own capital?",this.flag=null;break;default:break}},onlyForTG:function(t){t.region,t.flag;var e=Object(y["a"])(t,["region","flag"]);return e},guess:function(t){var e=this;this.totalQuestions.push({flag:this.flag,question:this.question,variants:this.variants.map((function(t){return e.onlyForTG(t)})),answer:{correct:this.answer.index,user:t}},"--------------"),null===this.guessedAnswerIndex&&(this.guessedAnswerIndex=t,t!==this.answer.index?0!==f.state.livesRemain&&f.commit("minusHP"):this.score++)},reset:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.score;Object.keys(this.answer).map((function(e){return t.answer[e]=null})),this.guessedAnswerIndex=null,this.score=e,this.failed=!1},next:function(){0===f.state.livesRemain&&(this.failed=!0,this.sentData()),!1===this.failed?null!==this.guessedAnswerIndex&&(this.reset(),this.fillVariants()):(this.variants=[],f.commit("HPreset"))},sentData:function(){this.totalQuestions.push({score:this.score,user:f.getters.userInfo}),this.sendToTelegram(JSON.stringify(this.totalQuestions))},newGame:function(){this.reset(0),this.fillVariants()}},watch:{variants:function(){this.variants===[]||this.failed||this.generateQuestion()}}},W=N,V=(n("b56b"),Object(v["a"])(W,b,w,!1,null,null,null)),J=V.exports,Y={mixins:[_],components:{questionsCard:J},data:function(){return{data:[]}},mounted:function(){f.dispatch("fillData"),f.dispatch("getUserInfo")}},z=Y,X=(n("5c0b"),Object(v["a"])(z,a,i,!1,null,null,null)),K=X.exports,Z=n("8c4f");s["a"].use(Z["a"]);var tt=[],et=new Z["a"]({routes:tt}),nt=et;s["a"].config.productionTip=!1,new s["a"]({router:nt,store:f,render:function(t){return t(K)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var s=n("9c0c"),a=n.n(s);a.a},"9c0c":function(t,e,n){},ad4f:function(t,e,n){},b56b:function(t,e,n){"use strict";var s=n("ad4f"),a=n.n(s);a.a},b72d:function(t,e,n){}});
//# sourceMappingURL=app.dee58e03.js.map